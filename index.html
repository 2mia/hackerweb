<!DOCTYPE html>
<html manifest="manifest.appcache">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>HackerWeb</title>
<meta name="apple-mobile-web-app-title" content="HackerWeb">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="icons/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="icons/touch-icon-144.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="icons/touch-icon-114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="icons/touch-icon-72.png">
<link rel="apple-touch-icon-precomposed" href="icons/touch-icon.png">
<style>body{ visibility: hidden; }</style>
<script>
// WP8 Viewport fix: http://trentwalton.com/2013/01/16/windows-phone-8-viewport-fix/
if (navigator.userAgent.match(/IEMobile\/10\.0/)){
	var msViewportStyle = document.createElement('style');
	msViewportStyle.appendChild(document.createTextNode('@-ms-viewport{width:auto!important}'));
	document.getElementsByTagName('head')[0].appendChild(msViewportStyle);
}
</script>
<script>
var _gaq = [];
var RavenConfig = { dsn: 'https://ba1fa9e133f64714b762e2d8d46a0c63@app.getsentry.com/6152' };

//if (location.hostname == 'cheeaun.github.io')
{
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-46243027-1', 'tldr.ro');
	ga('send', 'pageview', {'page': '/hn-index','title': 'HN index'});
}

if (window.applicationCache){
	// "Naturally" reload when an update is available
	var reload = false;
	window.applicationCache.addEventListener('updateready', function(){
		if (window.applicationCache.status == window.applicationCache.UPDATEREADY){
			window.applicationCache.swapCache();
			reload = true;
		}
	}, false);

	setInterval(function(){
		try { // There's nothing to update for first-time load, browser freaks out :/
			window.applicationCache.update();
		} catch (e){}
	}, 1000*60*60); // Every hour

	var checkReload = function(){
		if (reload) location.reload();
	};
	window.addEventListener('pageshow', checkReload, false);
	window.addEventListener('focus', checkReload, false);
} else {}

</script>
</head>
<body>
<!--[if lt IE 9]>
	<div id="outdated-browser">
		<p>You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
		<p><small>Else, just go to <a href="https://news.ycombinator.com/">Hacker News</a> web site instead.</small></p>
	</div>
<![endif]-->
<div id="apploader"></div>
<div class="view hidden" id="view-home">
	<header>
		<a href="#/about" class="header-button header-button-left"><button>About</button></a>
		<h1 style="margin: 0 65px;">HackerWeb</h1>
		<a class="header-button header-button-icon header-button-right" id="view-home-refresh"><button><i class="icon-refresh">Refresh</i></button></a>
	</header>
	<div class="scroll">
		<section>
		</section>
	</div>
</div>
<div class="view hidden" id="view-comments">
	<header>
		<a href="#/" class="header-button header-button-left header-back-button"><button>News</button></a>
		<h1 style="margin: 0 65px;"></h1>
	</header>
	<div class="scroll">
		<section>
		</section>
	</div>
</div>
<div class="view hidden" id="view-about">
	<header>
		<a href="#/" class="header-button header-button-left"><button>Close</button></a>
		<h1>About</h1>
	</header>
	<div class="scroll striped">
		<section>
			<div class="grouped-tableview cf">
				<span id="y-icon"></span>
				<p id="app-desc"><strong>HackerWeb</strong><br>A simply readable Hacker News web app.</p>
			</div>
			<ul class="grouped-tableview grouped-tableview-links">
				<li><a href="http://hackerwebapp.com/" target="_blank" class="disclosure">HackerWeb homepage</a></li>
				<li><a href="https://news.ycombinator.com/" target="_blank" class="disclosure">Hacker News homepage</a></li>
				<li><a href="http://ycombinator.com/newsfaq.html" target="_blank" class="disclosure">Hacker News FAQ</a></li>
				<li><a href="https://github.com/cheeaun/hackerweb" target="_blank" class="disclosure">HackerWeb on GitHub</a></li>
				<li><a href="https://twitter.com/cheeaun" target="_blank" class="disclosure">Follow @cheeaun</a></li>
				<li><a href="https://www.gittip.com/cheeaun/" target="_blank" class="disclosure">Gittip @cheeaun</a></li>
				<li><a href="mailto:cheeaun+hackerweb@gmail.com?subject=HackerWeb feedback" class="disclosure">Send Feedback</a></li>
			</ul>
			<p class="foot-label">Built by Lim Chee Aun.<br>Not affiliated with Hacker News or YCombinator.</p>
		</section>
	</div>
</div>
<script>
(function(d, ua){
	var hasLocalStorage = false;
	try {
		var testKey = '__hackerweb__test';
		localStorage.setItem(testKey, testKey);
		localStorage.removeItem(testKey);
		hasLocalStorage = true;
	} catch(e) {}

	var theme = 'ios';
	if (ua && /iPhone|iPod|iPad/.test(ua) && parseInt((ua.match(/ OS (\d+)_/i) || [,0])[1], 10) >= 5){
		theme = 'ios';
	}
	if (hasLocalStorage) theme = localStorage['hackerweb:options:theme'] || theme;

	var head = d.head || d.getElementsByTagName('head')[0];

	var link = d.createElement('link');
	link.rel = 'stylesheet';
	link.href = 'assets/css/hw-' + theme + '.css';
	head.insertBefore(link, head.lastChild);

	var script = d.createElement('script');
	script.src = 'js/hw-' + theme + '.min.js';
	head.insertBefore(script, head.lastChild);

	if (typeof _gaq != 'undefined') setTimeout(function(){
		_gaq.push(['_trackEvent', 'App', 'Theme', theme]);
	}, 2000);
})(document, navigator.userAgent);
</script>
</body>
</html>
